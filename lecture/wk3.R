#WK3

# ==============================
# 1. lapply
# ==============================

x<-1:4
lapply(data, runif, min=0, max=10)

# [[1]]
# [1] 4.591058
# 
# [[2]]
# [1] 7.734119 2.229346
# 
# [[3]]
# [1] 1.0387180 3.7849762 0.5395112
# 
# [[4]]
# [1] 2.070625 1.969205 4.532516 3.699623

y<-list(a=1:5, b=rnorm(10))
lapply(y,mean)
sapply(y,mean)

# $a
# [1] 3
# 
# $b
# [1] -0.1836756


# ==============================
# 2. sapply will simplify the result of lapply
# ==============================


# ==============================
# 3. apply
# ==============================

z<-matrix(rnorm(200),20,20)
apply(z,2,mean) #calculate mean of the 2nd dim

# [1]  0.29848078  0.25833267 -0.06025433  0.32683976
# [5]  0.05497687  0.16363224  0.09702844  0.09923212
# [9] -0.55086714 -0.25889710  0.29848078  0.25833267
# [13] -0.06025433  0.32683976  0.05497687  0.16363224
# [17]  0.09702844  0.09923212 -0.55086714 -0.25889710

apply(z, 1, quantile, probs = c(0.25, 0.75))

# [,1]       [,2]       [,3]       [,4]       [,5]
# 25% -0.9585499 -0.9104566 -0.5520786 -0.5318018 -0.7054050
# 75%  0.2634155  0.5402385  0.8563916  0.7993704  0.4900218

a<-array(rnorm(2*2*10),c(2,2,10))
apply(a,c(1,2),mean)
rowMeans(a, dims=2)

# [,1]        [,2]
# [1,] -0.01424337 -0.02692615
# [2,]  0.35095386  0.29765774


# ==============================
# 4. tapply
# ==============================
b<-c(rnorm(10),runif(10),rnorm(10,1))
f<-gl(3,10)
tapply(b,f,mean)

# 1         2         3 
# 0.2000341 0.6869740 1.1424117 


# ==============================
# 5. split
# ==============================
split(b,f)
# 
# $`1`
# [1]  0.70186102  3.03427476 -0.64124277 -2.37159476
# [5]  0.06139805 -1.20795036  0.59869491  0.08548140
# [9]  1.07461826  0.66480050
# 
# $`2`
# [1] 0.9966911 0.5187589 0.6164537 0.8869187 0.7697698
# [6] 0.4984178 0.2389583 0.8497132 0.7773744 0.7166838
# 
# $`3`
# [1]  3.4731550  1.4863250  1.4460220  1.2005636  2.1533429
# [6]  0.1955924  0.0010063  1.1464743 -0.8873131  1.2089484


lapply(split(b,f),mean)

# ==============================
6. mapply
# ==============================

mapply(rep,1:4,4:1)

